<html lang="en">
    <head charset="UTF-8">
        <title>忘记密码？</title>
    </head>
    <style type="text/csss">

    </style>
    <body>
        <div class="reset_password">
            <form method="post" id="reset_password">
                <div>用户名：<input id="username" name="username" placeholder="用户名"></div>
                <div>邮箱：<input id="email" name="email" placeholder="邮箱"></div>
                <div>手机号：<input id="phone" name="phone" placeholder="手机号"></div>
                <div>新密码：<input id="password" name="password" placeholder="新密码"></div>
                <div>确认密码：<input id="sure_password" name="sure_password" placeholder="确认密码"></div>
                <div><div class="complete">完成</div>
                <div>请至少填写两项信息</div>
            </form>
        </div>
    </body>
<script>
document.addEventListener("DOMContentLoaded", function(event) {
    var complete = document.querySelector(".complete");
    complete.addEventListener("click", function(event) {
        event.preventDefault(); // 阻止默认行为

        // 获取表单数据
        var username = document.getElementById("username").value;
        var email = document.getElementById("email").value;
        var phone = document.getElementById("phone").value;
        var password = document.getElementById("password").value;
        var sure_password = document.getElementById("sure_password").value;
        if (password !== sure_password) {
            alert("密码不匹配");
            return;
        }
        var formData=new FormData();
        if(username!=""){
            formData.append("username",username);
        }
        if(email!=""){
            formData.append("email",email);
        }
        if(phone!=""){
            formData.append("phone",phone);
        }
        if(password!=""){
            formData.append("password",password);
        }
        if(sure_password!=""){
            formData.append("sure_password",sure_password);
        }
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/resetpassword");
        var response=xhr.responseText;
        if(response=="success"){
            alert("重置密码成功");
            window.location.href = "/login_page";
        }else{
            alert("重置密码失败,请重试");
        }

    });
});
</script>
</html>